"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[2497],{"9524":function(e,t,n){n.d(t,{"BB":function(){return a},"kM":function(){return i},"Hv":function(){return generateGeneralFail},"JA":function(){return combineOptions},"vL":function(){return stringfiyUrl}});var r=n(969),o=n(9059);var a=!0,i=function typeOf(e,t){return[t].flat().some((function(t){return Object.prototype.toString.call(e)==="[object "+t+"]"}))};function generateGeneralFail(e,t){var n="[API "+e+"] "+(t=t||"调用失败");return a||(0,r.H)(n),{"errMsg":n}}function combineOptions(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.assign({},e,t)}function stringfiyUrl(e,t){var n=e;if(t&&(0,r.hM)(t,"Object")){var a=n.includes("?");n+=(a?"&":"?")+(0,o.stringify)(t)}return n}},"2497":function(e,t,n){n.r(t),n.d(t,{"default":function(){return h}});var r=n(94),o=n(1503),a=n(2535),i=n(9524),u=["progress","headersReceive","afterSend"],c=["afterSend"];function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}var l=function useFile(){return{"upload":function upload(e){return new Promise((function(t,n){try{var r=filterOptions(e),o=r[0],u=r[1];autoListenWithTask((0,a.uploadFile)(_extends({},o||{},{"success":t,"fail":n})),u)}catch(e){n((0,i.Hv)("uploadFile",e.message))}}))},"download":function download(e){return new Promise((function(t,n){try{var r=filterOptions(e),o=r[0],u=r[1];autoListenWithTask((0,a.downloadFile)(_extends({},o||{},{"success":t,"fail":n})),u)}catch(e){n((0,i.Hv)("downloadFile",e.message))}}))}}};function filterOptions(e){var t=e.progress,n=e.headersReceive,r=e.afterSend;return[_objectWithoutPropertiesLoose(e,u),{"progress":t,"headersReceive":n,"afterSend":r}]}function autoListenWithTask(e,t){var n=t.afterSend,r=_objectWithoutPropertiesLoose(t,c);null==n||n(e),Object.entries(r).filter((function(e){return e[1]})).forEach((function(t){var n,r=t[0],o=t[1];return null==e||null==(n=e[r])?void 0:n.call(e,o)}))}var s=n(5043),d=n(2053),f=n(4012),p=n(969),v=(0,d.defineComponent)({"__name":"index","setup":function setup(e){var t=(0,f.eJ)(!1),n=(0,s.Z)(t,2),i=n[0],u=n[1],c=(0,f.eJ)(0),v=(0,s.Z)(c,2),h=v[0],g=v[1],m=(0,f.eJ)("https://storage.360buyimg.com/nutui/video/video_NutUI.mp4"),w=(0,s.Z)(m,2),b=w[0],x=w[1],_=(0,f.eJ)(0),k=(0,s.Z)(_,2),y=k[0],O=k[1],C=l(),V=C.download,j=C.upload,P=function onProgress(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.progress,n=void 0===t?0:t,r=e.totalBytesSent,o=void 0===r?0:r,i=e.totalBytesExpectedToSend,u=void 0===i?0:i;(arguments.length>1?arguments[1]:void 0)(n),(0,a.showToast)({"title":"".concat(n,"%: ").concat(o," / ").concat(u),"icon":"loading","mask":!0})},F=function onHeadersReceived(e){(0,p.cM)(e),(0,a.showToast)({"title":"onHeadersReceived trigger","icon":"none","mask":!0})},N=function(){var e=(0,o.Z)((0,r.Z)().mark((function _callee(){var e,t,n;return(0,r.Z)().wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:if(null!==(e=(0,p.JR)(b))&&void 0!==e&&e.length){r.next=2;break}return r.abrupt("return");case 2:return t={"progress":function downloadUpdate(e){return P(e,O)},"headersReceive":F,"url":(0,p.JR)(b)},u(!0),O(0),r.prev=6,r.next=9,V(t);case 9:n=r.sent,(0,a.showModal)({"title":"下载成功","content":null==n?void 0:n.tempFilePath,"showCancel":!1}),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),(0,p.H)(r.t0.message);case 16:u(!1);case 17:case"end":return r.stop()}}),_callee,null,[[6,13]])})));return function handleDownload(){return e.apply(this,arguments)}}(),R=function(){var e=(0,o.Z)((0,r.Z)().mark((function _callee2(){var e,t,n;return(0,r.Z)().wrap((function _callee2$(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,(0,a.chooseVideo)({});case 3:if(null==(e=r.sent)||!e.tempFilePath){r.next=13;break}return g(0),u(!0),t={"progress":function uploadUpdate(e){return P(e,g)},"headersReceive":F,"filePath":e.tempFilePath},r.next=11,j(t);case 11:n=r.sent,(0,a.showModal)({"title":"上传成功","content":null==n?void 0:n.data,"showCancel":!1});case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(0),(0,p.H)(r.t0.message);case 18:u(!1);case 19:case"end":return r.stop()}}),_callee2,null,[[0,15]])})));return function handleUpload(){return e.apply(this,arguments)}}();return function(e,t){var n=(0,d.resolveComponent)("nut-button"),r=(0,d.resolveComponent)("nut-cell"),o=(0,d.resolveComponent)("nut-progress"),a=(0,d.resolveComponent)("nut-input"),u=(0,d.resolveComponent)("demo-content");return(0,d.openBlock)(),(0,d.createBlock)(u,null,{"default":(0,d.withCtx)((function(){return[(0,d.createVNode)(r,{"title":"上传"},{"link":(0,d.withCtx)((function(){return[(0,d.createVNode)(n,{"onClick":t[0]||(t[0]=function(e){return R()})},{"default":(0,d.withCtx)((function(){return[(0,d.createTextVNode)("点击")]})),"_":1})]})),"_":1}),(0,d.createVNode)(o,{"percentage":(0,d.unref)(h)},null,8,["percentage"]),(0,d.createVNode)(a,{"label":"地址","placeholder":"请输入下载地址","modelValue":(0,d.unref)(b),"onUpdate:modelValue":[t[1]||(t[1]=function(e){return(0,d.isRef)(b)?b.value=e:null}),t[2]||(t[2]=function(e){return(0,d.unref)(x)(e)})]},null,8,["modelValue"]),(0,d.createVNode)(r,{"title":"下载"},{"link":(0,d.withCtx)((function(){return[(0,d.createVNode)(n,{"loading":(0,d.unref)(i),"onClick":t[3]||(t[3]=function(e){return N()})},{"default":(0,d.withCtx)((function(){return[(0,d.createTextVNode)("点击")]})),"_":1},8,["loading"])]})),"_":1}),(0,d.createVNode)(o,{"percentage":(0,d.unref)(y)},null,8,["percentage"])]})),"_":1})}}});var h=v}}]);