"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[4567],{"8186":function(e,n,t){t.d(n,{"Z":function(){return a}});var r=t(2535),i=t.n(r),o=t(4012);var u=function useVisible(){var e=(0,o.eJ)(!0),n=e[0],t=e[1],r=function listenVisible(){var e=document.visibilityState;t("visible"===e)};return(0,o.d4)((function(){return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),window.addEventListener("blur",r,!1),function(){window.removeEventListener("visibilitychange",r,!1),window.removeEventListener("focus",r,!1),window.removeEventListener("blur",r,!1)}}),[]),i().useDidHide((function(){t(!1)})),n},c=t(6881);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_extends.apply(this,arguments)}var a=function useAuthorize(e){var n=u(),t=(0,o.eJ)({"mini":{}}),i=t[0],a=t[1],s=(0,o.eJ)({}),l=s[0],f=s[1],p=(0,c.Z)(r.authorize),d=(0,c.Z)(r.authorizeForMiniProgram),v=(0,c.Z)(r.getSetting),h=function get(e){return v({"withSubscriptions":e}).then((function(e){var n=e.authSetting,t=e.subscriptionsSetting,r=e.miniprogramAuthSetting;return a(_extends({},n,{"mini":r})),f(t),e}))},m=(0,c.Z)(r.openSetting);return(0,o.d4)((function(){h(e)}),[n]),{"authSetting":i,"subscriptionsSetting":l,"authorize":function authorize(e,n){var t={"scope":e};return n?d(t):p(t)},"get":h,"open":function open(e){return m({"withSubscriptions":e}).then((function(e){var n=e.authSetting,t=e.subscriptionsSetting;return a(_extends({},n,{"mini":i.mini})),f(t),e}))}}}},"4992":function(e,n,t){var r=t(2535),i=t(4012),o=t(6881),u=t(9524);n.Z=function useModal(e){var n=(0,i.sO)(e);(0,i.d4)((function(){n.current=e}),[e]);var t=(0,o.Z)(r.showModal);return function show(e){if(!e&&!n.current)return Promise.reject((0,u.Hv)("showModal","please provide a option"));var r=(0,u.JA)(n.current,e);return t(r)}}},"6881":function(e,n,t){var r=t(969),i=t(9524);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_extends.apply(this,arguments)}n.Z=function usePromise(e){return function(n){var t;if(!e)return Promise.reject((0,i.Hv)(e,"please input a valid method name"));var o=null!=(t=null==e?void 0:e.name)?t:"usePromise::implementMethod";return new Promise((function(t,u){try{if(!(0,r.mf)(e))throw new TypeError("["+o+"] not vaild for Taro");var c;null==(c=e(_extends({},n||{},{"success":t,"fail":u})))||null==c.catch||c.catch(u)}catch(e){u((0,i.Hv)(o,e.message))}}))}}},"9524":function(e,n,t){t.d(n,{"BB":function(){return o},"kM":function(){return u},"Hv":function(){return generateGeneralFail},"JA":function(){return combineOptions},"vL":function(){return stringfiyUrl}});var r=t(969),i=t(9059);var o=!0,u=function typeOf(e,n){return[n].flat().some((function(n){return Object.prototype.toString.call(e)==="[object "+n+"]"}))};function generateGeneralFail(e,n){var t="[API "+e+"] "+(n=n||"调用失败");return o||(0,r.H)(t),{"errMsg":t}}function combineOptions(e,n){return void 0===e&&(e={}),void 0===n&&(n={}),Object.assign({},e,n)}function stringfiyUrl(e,n){var t=e;if(n&&(0,r.hM)(n,"Object")){var o=t.includes("?");t+=(o?"&":"?")+(0,i.stringify)(n)}return t}},"4567":function(e,n,t){t.r(n),t.d(n,{"default":function(){return l}});var r=t(9120),i=t(94),o=t(1503),u=t(8186),c=t(4992),a=t(2053),s=(0,a.defineComponent)({"__name":"index","setup":function setup(e){var n,t=(0,c.Z)({"title":"授权结果","mask":!0,"showCancel":!1}),s=(0,u.Z)(!0),l=s.authSetting,f=s.subscriptionsSetting,p=s.authorize,d=s.open,v=null===(n=Object.keys(l))||void 0===n?void 0:n.length,h=function(){var e=(0,o.Z)((0,i.Z)().mark((function _callee(){var e;return(0,i.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e="授权成功",n.prev=1,n.next=4,p("scope.userInfo");case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e="授权失败";case 9:t({"content":e});case 10:case"end":return n.stop()}}),_callee,null,[[1,6]])})));return function handleAuth(){return e.apply(this,arguments)}}();return function(e,n){var t=(0,a.resolveComponent)("nut-cell"),i=(0,a.resolveComponent)("nut-cell-group"),o=(0,a.resolveComponent)("nut-button"),u=(0,a.resolveComponent)("demo-content");return(0,a.openBlock)(),(0,a.createBlock)(u,null,{"default":(0,a.withCtx)((function(){return[(0,a.unref)(v)?((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,{"key":1},(0,a.renderList)([(0,a.unref)(l),(0,a.unref)(f)],(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e,(function(e,n){return(0,a.openBlock)(),(0,a.createBlock)(i,{"title":"授权 - "+n,"key":n},{"default":(0,a.withCtx)((function(){return[["string","boolean"].includes((0,r.Z)(e))?((0,a.openBlock)(),(0,a.createBlock)(t,{"key":0,"title":"授权 - "+n,"desc":String(e)},null,8,["title","desc"])):((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,{"key":1},(0,a.renderList)(e,(function(e,n){return(0,a.openBlock)(),(0,a.createBlock)(t,{"key":n,"title":"授权 - "+n,"desc":String(e)},null,8,["title","desc"])})),128))]})),"_":2},1032,["title"])})),128))],64)})),256)):((0,a.openBlock)(),(0,a.createBlock)(t,{"key":0},{"default":(0,a.withCtx)((function(){return[(0,a.createTextVNode)("暂无信息")]})),"_":1})),(0,a.createVNode)(o,{"shape":"square","type":"primary","class":"gap","block":"","onClick":n[0]||(n[0]=function(e){return(0,a.unref)(d)(!0)})},{"default":(0,a.withCtx)((function(){return[(0,a.createTextVNode)("打开设置")]})),"_":1}),(0,a.createVNode)(o,{"shape":"square","type":"primary","class":"gap","block":"","onClick":n[1]||(n[1]=function(e){return h()})},{"default":(0,a.withCtx)((function(){return[(0,a.createTextVNode)("授权")]})),"_":1})]})),"_":1})}}});var l=s}}]);