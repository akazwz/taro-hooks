"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[8795],{"4992":function(n,t,e){var r=e(2535),o=e(4012),u=e(6881),c=e(9524);t.Z=function useModal(n){var t=(0,o.sO)(n);(0,o.d4)((function(){t.current=n}),[n]);var e=(0,u.Z)(r.showModal);return function show(n){if(!n&&!t.current)return Promise.reject((0,c.Hv)("showModal","please provide a option"));var r=(0,c.JA)(t.current,n);return e(r)}}},"6881":function(n,t,e){var r=e(969),o=e(9524);function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},_extends.apply(this,arguments)}t.Z=function usePromise(n){return function(t){var e;if(!n)return Promise.reject((0,o.Hv)(n,"please input a valid method name"));var u=null!=(e=null==n?void 0:n.name)?e:"usePromise::implementMethod";return new Promise((function(e,c){try{if(!(0,r.mf)(n))throw new TypeError("["+u+"] not vaild for Taro");var i;null==(i=n(_extends({},t||{},{"success":e,"fail":c})))||null==i.catch||i.catch(c)}catch(n){c((0,o.Hv)(u,n.message))}}))}}},"9524":function(n,t,e){e.d(t,{"BB":function(){return u},"kM":function(){return c},"Hv":function(){return generateGeneralFail},"JA":function(){return combineOptions},"vL":function(){return stringfiyUrl}});var r=e(969),o=e(9059);var u=!0,c=function typeOf(n,t){return[t].flat().some((function(t){return Object.prototype.toString.call(n)==="[object "+t+"]"}))};function generateGeneralFail(n,t){var e="[API "+n+"] "+(t=t||"调用失败");return u||(0,r.H)(e),{"errMsg":e}}function combineOptions(n,t){return void 0===n&&(n={}),void 0===t&&(t={}),Object.assign({},n,t)}function stringfiyUrl(n,t){var e=n;if(t&&(0,r.hM)(t,"Object")){var u=e.includes("?");e+=(u?"&":"?")+(0,o.stringify)(t)}return e}},"8795":function(n,t,e){e.r(t),e.d(t,{"default":function(){return d}});var r=e(94),o=e(1503),u=e(4992),c=e(2535),i=e(4012),a=e(6881),s=e(9524);var l=function useMotion(n,t){var e=(0,i.eJ)(),r=e[0],o=e[1],u=(0,i.sO)(!1),l=(0,i.sO)([]),f=function privateListener(n){o(n),l.current.forEach((function(t){return null==t?void 0:t(n)}))},v=function add(n){return u.current||((0,c.onDeviceMotionChange)(f),u.current=!0),l.current=[].concat(l.current,[n]),Promise.resolve((0,s.Hv)("add","success"))},p=function off(n){return 1===l.current.length&&((0,c.offDeviceMotionChange)(f),u.current=!1),l.current=l.current.filter((function(t){return t===n})),Promise.resolve((0,s.Hv)("off","success"))},d=(0,a.Z)(c.startDeviceMotionListening),h=function start(n){var e,r={"interval":null!=(e=null!=n?n:t)?e:"normal"};return d(r).then((function(){return!0}),(function(){return!1}))},m=(0,a.Z)(c.stopDeviceMotionListening),g=function stop(){return m().then((function(){var n;return null==(n=l.current)||null==n.map||n.map((function(n){return p(n)})),!0}))},y=function _async(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(n){return Promise.reject(n)}}}((function(){return function _catch(n,t){try{var e=n()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}((function(){return function _await(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}(h(t),(function(n){n&&!u.current&&v(f)}))}),(function(){return(0,s.Hv)("manualListenMotion")}))}));return(0,i.d4)((function(){return n&&y(),function(){n&&g()}}),[n,t]),[r,{"start":h,"stop":g,"add":v,"off":p}]},f=e(5043),v=e(2053),p=(0,v.defineComponent)({"__name":"index","setup":function setup(n){var t=l(!0),e=(0,f.Z)(t,2),c=e[0],i=e[1],a=(i.start,i.stop),s=i.add,p=i.off;console.log(c);var d=(0,u.Z)({"title":"useMotion","showCancel":!1,"mask":!0}),h=function customListen(n){d({"content":JSON.stringify(n)}),p(customListen)},m=function(){var n=(0,o.Z)((0,r.Z)().mark((function _callee(){return(0,r.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s(h);case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),d({"content":"监听失败"});case 8:case"end":return n.stop()}}),_callee,null,[[0,5]])})));return function handleListen(){return n.apply(this,arguments)}}();return function(n,t){var e=(0,v.resolveComponent)("nut-button"),r=(0,v.resolveComponent)("nut-cell"),o=(0,v.resolveComponent)("nut-cell-group"),u=(0,v.resolveComponent)("demo-content");return(0,v.openBlock)(),(0,v.createBlock)(u,null,{"default":(0,v.withCtx)((function(){return[(0,v.createVNode)(e,{"shape":"square","type":"primary","class":"gap","block":"","onClick":t[0]||(t[0]=function(n){return m()})},{"default":(0,v.withCtx)((function(){return[(0,v.createTextVNode)("增加一次监听并取消")]})),"_":1}),(0,v.createVNode)(e,{"shape":"square","type":"primary","class":"gap","block":"","onClick":t[1]||(t[1]=function(n){return(0,v.unref)(a)()})},{"default":(0,v.withCtx)((function(){return[(0,v.createTextVNode)("停止所有")]})),"_":1}),(0,v.createVNode)(o,{"title":"方向信息"},{"default":(0,v.withCtx)((function(){return[((0,v.openBlock)(!0),(0,v.createElementBlock)(v.Fragment,null,(0,v.renderList)((0,v.unref)(c),(function(t,e){return(0,v.openBlock)(),(0,v.createBlock)(r,{"key":e,"title":e,"sub-title":n.$filters.stringify(t)},null,8,["title","sub-title"])})),128))]})),"_":1})]})),"_":1})}}});var d=p}}]);