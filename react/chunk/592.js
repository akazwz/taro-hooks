"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[592],{"592":function(e,t,n){n.d(t,{"t0":function(){return p},"ou":function(){return u},"VI":function(){return l},"sy":function(){return d},"Zw":function(){return h},"jy":function(){return f},"d0":function(){return g},"Ap":function(){return m},"Jp":function(){return v},"nZ":function(){return R},"L$":function(){return P},"aB":function(){return C},"jk":function(){return y},"bO":function(){return S},"YG":function(){return b},"QV":function(){return x},"Bk":function(){return A},"J7":function(){return I},"uo":function(){return E},"C1":function(){return D},"tv":function(){return useRouter},"h8":function(){return O},"Lm":function(){return useScope},"Mh":function(){return setReconciler},"Kh":function(){return connectReactPage},"Ox":function(){return createReactApp},"xx":function(){return createNativePageConfig},"_m":function(){return createNativeComponentConfig}});var o=n(491),r={"PageContext":o.kT,"R":o.kT},a="taro-app";function isClassComponent(e,t){var n;const r=t.prototype;return!(null===(n=t.displayName)||void 0===n?void 0:n.includes("Connect"))&&((0,o.mf)(t.render)||!!(null==r?void 0:r.isReactComponent)||r instanceof e.Component)}function setDefaultDescriptor(e){return e.writable=!0,e.enumerable=!0,e}function setRouterParams(e){o.GY.router=Object.assign({"params":null==e?void 0:e.query},e)}var s,i,c,createTaroHook=e=>t=>{const{"R":n,"PageContext":s}=r,i=n.useContext(s)||a,c=n.useRef(),p=n.useRef(t);p.current!==t&&(p.current=t),n.useLayoutEffect((()=>{let t=c.current=(0,o.R0)(i),n=!1;t||(n=!0,c.current=Object.create(null),t=c.current);const callback=(...e)=>p.current(...e);return(0,o.mf)(t[e])?t[e]=[t[e],callback]:t[e]=[...t[e]||[],callback],n&&(0,o.px)(t,i),()=>{const t=c.current;if(!t)return;const n=t[e];n===callback?t[e]=void 0:(0,o.kJ)(n)&&(t[e]=n.filter((e=>e!==callback))),c.current=void 0}}),[])},p=createTaroHook("componentDidHide"),u=createTaroHook("componentDidShow"),l=createTaroHook("onError"),d=createTaroHook("onUnhandledRejection"),h=createTaroHook("onLaunch"),f=createTaroHook("onPageNotFound"),g=createTaroHook("onLoad"),m=createTaroHook("onPageScroll"),v=createTaroHook("onPullDownRefresh"),R=createTaroHook("onPullIntercept"),P=createTaroHook("onReachBottom"),C=createTaroHook("onResize"),y=createTaroHook("onUnload"),S=createTaroHook("onAddToFavorites"),b=createTaroHook("onOptionMenuClick"),x=createTaroHook("onSaveExitState"),A=createTaroHook("onShareAppMessage"),I=createTaroHook("onShareTimeline"),E=createTaroHook("onTitleClick"),D=createTaroHook("onReady"),useRouter=(e=!1)=>{const t=r.R;return e?o.GY.router:t.useMemo((()=>o.GY.router),[])},O=createTaroHook("onTabItemTap"),useScope=()=>{},w=Object.freeze({"__proto__":null,"useAddToFavorites":S,"useDidHide":p,"useDidShow":u,"useError":l,"useLaunch":h,"useLoad":g,"useOptionMenuClick":b,"usePageNotFound":f,"usePageScroll":m,"usePullDownRefresh":v,"usePullIntercept":R,"useReachBottom":P,"useReady":D,"useResize":C,"useRouter":useRouter,"useSaveExitState":x,"useScope":useScope,"useShareAppMessage":A,"useShareTimeline":I,"useTabItemTap":O,"useTitleClick":E,"useUnhandledRejection":d,"useUnload":y}),T=(0,o.BG)(),Y=(0,o.gl)();function setReconciler(e){o.PT.tap("getLifecycle",(function(e,t){return e[t=t.replace(/^on(Show|Hide)$/,"componentDid$1")]})),o.PT.tap("modifyMpEvent",(function(e){Object.defineProperty(e,"type",{"value":e.type.replace(/-/g,"")})})),o.PT.tap("batchedEventUpdates",(function(t){e.unstable_batchedUpdates(t)})),o.PT.tap("mergePageInstance",(function(e,t){e&&t&&("constructor"in e||Object.keys(e).forEach((n=>{const r=e[n],a=function ensureIsArray(e){return(0,o.kJ)(e)?e:e?[e]:[]}(t[n]);t[n]=a.concat(r)})))})),Y&&(o.PT.tap("createPullDownComponent",((e,t,n,o)=>{const r=isClassComponent(n,e);return n.forwardRef(((t,n)=>{const a=Object.assign({},t),i=r?{"ref":n}:{"forwardedRef":n,"reactReduxForwardedRef":n};return s(o||"taro-pull-to-refresh",null,s(e,Object.assign(Object.assign({},a),i)))}))})),o.PT.tap("getDOMNode",(t=>e.findDOMNode(t))))}function connectReactPage(e,t){return n=>{const inject=e=>e&&(0,o.px)(e,t),a=isClassComponent(e,n)?{"ref":inject}:{"forwardedRef":inject,"reactReduxForwardedRef":inject};return r.PageContext===o.kT&&(r.PageContext=e.createContext("")),class PageWrapper extends e.Component{static"getDerivedStateFromError"(e){var t,n;return null===(n=null===(t=o.GY.app)||void 0===t?void 0:t.onError)||void 0===n||n.call(t,e.message+e.stack),{"hasError":!0}}"componentDidCatch"(e,t){0}"render"(){const e=this.state.hasError?[]:s(r.PageContext.Provider,{"value":t},s(n,Object.assign(Object.assign({},this.props),a)));return Y?s("div",{"id":t,"className":"taro_page"},e):s("root",{"id":t},e)}"constructor"(){super(...arguments),this.state={"hasError":!1}}}}}function createReactApp(e,t,n,p){r.R=t,s=t.createElement,i=n,c=t.Fragment;const u=t.createRef(),l=isClassComponent(t,e);let d,h;const f=new Promise((e=>h=e));function getAppInstance(){return u.current}function waitAppWrapper(e){d?e():f.then((()=>e()))}function renderReactRoot(){var e,n;let r="app";Y&&(r=(null==p?void 0:p.appId)||r);const a=o.c8.getElementById(r);if((t.version||"").startsWith("18")){const t=i.createRoot(a);null===(e=t.render)||void 0===e||e.call(t,s(AppWrapper))}else null===(n=i.render)||void 0===n||n.call(i,s(AppWrapper),a)}setReconciler(i);class AppWrapper extends t.Component{"mount"(e,n,o){const r=connectReactPage(t,n)(e),a=n+T();this.pages.push((()=>s(r,{"key":a,"tid":n}))),this.forceUpdate(o)}"unmount"(e,t){const n=this.elements,o=n.findIndex((t=>t.props.tid===e));n.splice(o,1),this.forceUpdate(t)}"render"(){const{"pages":t,"elements":n}=this;for(;t.length>0;){const e=t.pop();n.push(e())}let o=null;return l&&(o={"ref":u}),s(e,o,Y?s(null!=c?c:"div",null,n.slice()):n.slice())}"constructor"(e){super(e),this.pages=[],this.elements=[],d=this,h(this)}}Y||renderReactRoot();const[g,m,v]=o.PT.call("getMiniLifecycleImpl").app,R=Object.create({"render"(e){d.forceUpdate(e)},"mount"(e,t,n){d?d.mount(e,t,n):f.then((o=>o.mount(e,t,n)))},"unmount"(e,t){d.unmount(e,t)}},{"config":setDefaultDescriptor({"configurable":!0,"value":p}),[g]:setDefaultDescriptor({"value"(e){setRouterParams(e),Y&&renderReactRoot();waitAppWrapper((()=>{var t;const n=getAppInstance();if(this.$app=n,n){if(n.taroGlobalData){const e=n.taroGlobalData,t=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);t.forEach((t=>{Object.defineProperty(this,t,{"configurable":!0,"enumerable":!0,"get"(){return e[t]},"set"(n){e[t]=n}})})),Object.defineProperties(this,o)}null===(t=n.onLaunch)||void 0===t||t.call(n,e)}triggerAppHook("onLaunch",e)}))}}),[m]:setDefaultDescriptor({"value"(e){setRouterParams(e);waitAppWrapper((()=>{var t;const n=getAppInstance();null===(t=null==n?void 0:n.componentDidShow)||void 0===t||t.call(n,e),triggerAppHook("onShow",e)}))}}),[v]:setDefaultDescriptor({"value"(){waitAppWrapper((()=>{var e;const t=getAppInstance();null===(e=null==t?void 0:t.componentDidHide)||void 0===e||e.call(t),triggerAppHook("onHide")}))}}),"onError":setDefaultDescriptor({"value"(e){waitAppWrapper((()=>{var t;const n=getAppInstance();null===(t=null==n?void 0:n.onError)||void 0===t||t.call(n,e),triggerAppHook("onError",e)}))}}),"onUnhandledRejection":setDefaultDescriptor({"value"(e){waitAppWrapper((()=>{var t;const n=getAppInstance();null===(t=null==n?void 0:n.onUnhandledRejection)||void 0===t||t.call(n,e),triggerAppHook("onUnhandledRejection",e)}))}}),"onPageNotFound":setDefaultDescriptor({"value"(e){waitAppWrapper((()=>{var t;const n=getAppInstance();null===(t=null==n?void 0:n.onPageNotFound)||void 0===t||t.call(n,e),triggerAppHook("onPageNotFound",e)}))}})});function triggerAppHook(e,...t){const n=(0,o.R0)(a);if(n){const r=getAppInstance(),a=o.PT.call("getLifecycle",n,e);Array.isArray(a)&&a.forEach((e=>e.apply(r,t)))}}return o.GY.app=R,R}var G,_,j=(0,o.BG)();function initNativeComponentEntry(e,t,n){class NativeComponentWrapper extends e.Component{"componentDidMount"(){this.ctx.component=this;const e=this.root.current;e.ctx=this.ctx,e.performUpdate(!0)}"render"(){return G("root",{"ref":this.root,"id":this.props.compId},this.props.renderComponent(this.ctx))}"constructor"(){super(...arguments),this.root=e.createRef(),this.ctx=this.props.getCtx()}}class Entry extends e.Component{"componentDidMount"(){o.GY.app=this,n&&n()}"mount"(t,n,a,s){const inject=e=>e&&(0,o.px)(e,n),i=isClassComponent(e,t)?{"ref":inject}:{"forwardedRef":inject,"reactReduxForwardedRef":inject};r.PageContext===o.kT&&(r.PageContext=e.createContext(""));const c={"compId":n,"element":G(NativeComponentWrapper,{"key":n,"compId":n,"getCtx":a,"renderComponent"(e){return G(r.PageContext.Provider,{"value":n},G(t,Object.assign(Object.assign(Object.assign({},(e.data||(e.data={})).props),i),{"$scope":e})))}})};this.setState({"components":[...this.state.components,c]},(()=>s&&s()))}"unmount"(e,t){const n=this.state.components,r=n.findIndex((t=>t.compId===e)),a=[...n.slice(0,r),...n.slice(r+1)];this.setState({"components":a},(()=>{(0,o.Rs)(e),t&&t()}))}"render"(){return this.state.components.map((({"element":e})=>e))}"constructor"(){super(...arguments),this.state={"components":[]}}}setReconciler(t);const a=o.c8.getElementById("app");t.render(G(Entry,{}),a)}function createNativePageConfig(e,t,n,a,s,i){r.R=a,G=a.createElement,setReconciler(_=s);const[c,p,u,l,d,h,f]=o.PT.call("getMiniLifecycleImpl").page;let g,m,v=!1,R=[],P=null;const C=null!=t?t:`taro_page_${j()}`;function setCurrentRouter(e){const t=e.route||e.__route__||e.$taroPath;o.GY.router={"params":e.$taroParams,"path":(0,o.nY)(t),"$taroPath":e.$taroPath,"onReady":(0,o.Rb)(C),"onShow":(0,o.dV)(C),"onHide":(0,o.kY)(C)},(0,o.o8)(e.exitState)||(o.GY.router.exitState=e.exitState)}const y={"options":i,[c](t={},n){m=new Promise((e=>{g=e})),o.GY.page=this,this.config=i||{};const r=Object.assign({},t,{"$taroTimestamp":Date.now()}),s=this.$taroPath=(0,o.DW)(C,r);null==this.$taroParams&&(this.$taroParams=r),setCurrentRouter(this),o.yS.trigger(o.OS.INIT,s);const mountCallback=()=>{P=o.c8.getElementById(s),(0,o.zx)(null!==P,"没有找到页面实例。"),(0,o.p_)(s,c,this.$taroParams),g(),P.ctx=this,P.performUpdate(!0,n)},mount=()=>{o.GY.app?o.GY.app.mount(e,s,(()=>this),mountCallback):initNativeComponentEntry(a,_,(()=>{o.GY.app.mount(e,s,(()=>this),mountCallback)}))};v?R.push(mount):mount()},[p](){const e=this.$taroPath;o.yS.trigger(o.OS.DESTORY,e),(0,o.p_)(e,p),function resetCurrent(){o.GY.page=null,o.GY.router=null}(),v=!0,o.GY.app.unmount(e,(()=>{v=!1,(0,o.Rs)(e),P&&(P.ctx=null,P=null),R.length&&(R.forEach((e=>e())),R=[])}))},[u](){m.then((()=>{(0,o.p_)(this.$taroPath,o.K0),(0,o.Bj)((()=>o.td.trigger((0,o.Rb)(C)))),this.onReady.called=!0}))},[l](e={}){m.then((()=>{o.GY.page=this,setCurrentRouter(this),o.yS.trigger(o.OS.RECOVER,this.$taroPath),(0,o.p_)(this.$taroPath,o.eM,e),(0,o.Bj)((()=>o.td.trigger((0,o.dV)(C))))}))},[d](){o.yS.trigger(o.OS.RESTORE,this.$taroPath),o.GY.page===this&&(o.GY.page=null,o.GY.router=null),(0,o.p_)(this.$taroPath,o.YG),o.td.trigger((0,o.kY)(C))}};return h.forEach((e=>{y[e]=function(){return(0,o.p_)(this.$taroPath,e,...arguments)}})),f.forEach((t=>{var n;(e[t]||(null===(n=e.prototype)||void 0===n?void 0:n[t])||e[t.replace(/^on/,"enable")])&&(y[t]=function(...e){var n;const r=null===(n=e[0])||void 0===n?void 0:n.target;if(null==r?void 0:r.id){const e=r.id,t=o.c8.getElementById(e);t&&(r.dataset=t.dataset)}return(0,o.p_)(this.$taroPath,t,...e)})})),y.eh=o.$j,(0,o.o8)(n)||(y.data=n),o.PT.call("modifyPageObject",y),y}function createNativeComponentConfig(e,t,n,a){var s,i;r.R=t,G=t.createElement,setReconciler(_=n);const c={"options":a,"properties":{"props":{"type":null,"value":null,"observer"(e,t){var n;t&&(null===(n=this.component)||void 0===n||n.forceUpdate())}}},"created"(){o.GY.app||initNativeComponentEntry(t,_)},"attached"(){const t=this.compId=j();!function setCurrent(e){if(!getCurrentPages||"function"!=typeof getCurrentPages)return;const t=getCurrentPages(),n=t[t.length-1];if(o.GY.page===n)return;o.GY.page=n;const r=n.route||n.__route__,a={"params":n.options||{},"path":(0,o.nY)(r),"$taroPath":e,"onReady":"","onHide":"","onShow":""};o.GY.router=a,n.options||Object.defineProperty(n,"options",{"enumerable":!0,"configurable":!0,"get"(){return this._optionsValue},"set"(e){a.params=e,this._optionsValue=e}})}(t),this.config=a,o.GY.app.mount(e,t,(()=>this),(()=>{const e=(0,o.R0)(t);if(e&&e.node){const t=o.c8.getElementById(e.node.uid);t&&(t.ctx=this)}}))},"ready"(){(0,o.p_)(this.compId,"onReady")},"detached"(){!function resetCurrent(){o.GY.page=null,o.GY.router=null}(),o.GY.app.unmount(this.compId)},"pageLifetimes":{"show"(e){(0,o.p_)(this.compId,"onShow",e)},"hide"(){(0,o.p_)(this.compId,"onHide")}},"methods":{"eh":o.$j,"onLoad"(e){(0,o.p_)(this.compId,"onLoad",e)},"onUnload"(){(0,o.p_)(this.compId,"onUnload")}}};return(e.onShareAppMessage||(null===(s=e.prototype)||void 0===s?void 0:s.onShareAppMessage)||e.enableShareAppMessage)&&(c.methods.onShareAppMessage=function(e){const t=null==e?void 0:e.target;if(t){const e=t.id,n=o.c8.getElementById(e);n&&(t.dataset=n.dataset)}return(0,o.p_)(this.compId,"onShareAppMessage",e)}),(e.onShareTimeline||(null===(i=e.prototype)||void 0===i?void 0:i.onShareTimeline)||e.enableShareTimeline)&&(c.methods.onShareTimeline=function(){return(0,o.p_)(this.compId,"onShareTimeline")}),c}o.PT.tap("initNativeApi",(function(e){for(const t in w)e[t]=w[t]}))}}]);