"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[6023],{"8186":function(e,n,t){t.d(n,{"Z":function(){return a}});var r=t(2535),i=t.n(r),o=t(4012);var u=function useVisible(){var e=(0,o.eJ)(!0),n=e[0],t=e[1],r=function listenVisible(){var e=document.visibilityState;t("visible"===e)};return(0,o.d4)((function(){return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),window.addEventListener("blur",r,!1),function(){window.removeEventListener("visibilitychange",r,!1),window.removeEventListener("focus",r,!1),window.removeEventListener("blur",r,!1)}}),[]),i().useDidHide((function(){t(!1)})),n},c=t(6881);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_extends.apply(this,arguments)}var a=function useAuthorize(e){var n=u(),t=(0,o.eJ)({"mini":{}}),i=t[0],a=t[1],s=(0,o.eJ)({}),l=s[0],f=s[1],v=(0,c.Z)(r.authorize),d=(0,c.Z)(r.authorizeForMiniProgram),p=(0,c.Z)(r.getSetting),h=function get(e){return p({"withSubscriptions":e}).then((function(e){var n=e.authSetting,t=e.subscriptionsSetting,r=e.miniprogramAuthSetting;return a(_extends({},n,{"mini":r})),f(t),e}))},g=(0,c.Z)(r.openSetting);return(0,o.d4)((function(){h(e)}),[n]),{"authSetting":i,"subscriptionsSetting":l,"authorize":function authorize(e,n){var t={"scope":e};return n?d(t):v(t)},"get":h,"open":function open(e){return g({"withSubscriptions":e}).then((function(e){var n=e.authSetting,t=e.subscriptionsSetting;return a(_extends({},n,{"mini":i.mini})),f(t),e}))}}}},"7780":function(e,n,t){var r=t(2535),i=t(6881),o=t(9524);function _empty(){}function _callIgnored(e,n){return function _call(e,n,t){if(t)return n?n(e()):e();try{var r=Promise.resolve(e());return n?r.then(n):r}catch(e){return Promise.reject(e)}}(e,_empty,n)}function _invoke(e,n){var t=e();return t&&t.then?t.then(n):n(t)}n.Z=function useLogin(){var e=(0,i.Z)(r.checkSession),n=(0,i.Z)(r.login),t=(0,i.Z)(r.pluginLogin),u=function _async(e){return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(e.apply(this,n))}catch(e){return Promise.reject(e)}}}((function(r,i,u){var c=!r;return _invoke((function(){if(!c)return function _continueIgnored(e){if(e&&e.then)return e.then(_empty)}(function _catch(e,n){try{var t=e()}catch(e){return n(e)}return t&&t.then?t.then(void 0,n):t}((function(){return _callIgnored(e)}),(function(){c=!1})))}),(function(){var e=!1;return _invoke((function(){if(!c){var r=u?{"timeout":u}:{};return function _await(e,n,t){return t?n?n(e):e:(e&&e.then||(e=Promise.resolve(e)),n?e.then(n):e)}(i?t(r):n(r),(function(n){return e=!0,n}))}}),(function(n){return e?n:(0,o.Hv)("login","code is valid, do not use fetch new one!")}))}))}));return{"check":e,"login":u}}},"4992":function(e,n,t){var r=t(2535),i=t(4012),o=t(6881),u=t(9524);n.Z=function useModal(e){var n=(0,i.sO)(e);(0,i.d4)((function(){n.current=e}),[e]);var t=(0,o.Z)(r.showModal);return function show(e){if(!e&&!n.current)return Promise.reject((0,u.Hv)("showModal","please provide a option"));var r=(0,u.JA)(n.current,e);return t(r)}}},"6881":function(e,n,t){var r=t(969),i=t(9524);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_extends.apply(this,arguments)}n.Z=function usePromise(e){return function(n){var t;if(!e)return Promise.reject((0,i.Hv)(e,"please input a valid method name"));var o=null!=(t=null==e?void 0:e.name)?t:"usePromise::implementMethod";return new Promise((function(t,u){try{if(!(0,r.mf)(e))throw new TypeError("["+o+"] not vaild for Taro");var c;null==(c=e(_extends({},n||{},{"success":t,"fail":u})))||null==c.catch||c.catch(u)}catch(e){u((0,i.Hv)(o,e.message))}}))}}},"9524":function(e,n,t){t.d(n,{"BB":function(){return o},"kM":function(){return u},"Hv":function(){return generateGeneralFail},"JA":function(){return combineOptions},"vL":function(){return stringfiyUrl}});var r=t(969),i=t(9059);var o=!0,u=function typeOf(e,n){return[n].flat().some((function(n){return Object.prototype.toString.call(e)==="[object "+n+"]"}))};function generateGeneralFail(e,n){var t="[API "+e+"] "+(n=n||"调用失败");return o||(0,r.H)(t),{"errMsg":t}}function combineOptions(e,n){return void 0===e&&(e={}),void 0===n&&(n={}),Object.assign({},e,n)}function stringfiyUrl(e,n){var t=e;if(n&&(0,r.hM)(n,"Object")){var o=t.includes("?");t+=(o?"&":"?")+(0,i.stringify)(n)}return t}},"6023":function(e,n,t){t.r(n),t.d(n,{"default":function(){return m}});var r=t(8530),i=t(94),o=t(1503),u=t(4992),c=t(7780),a=t(2535),s=t(4012),l=t(6881),f=t(8186),v=t(9524);var d=function useUserInfo(){var e=(0,s.eJ)(),n=e[0],t=e[1],r=(0,f.Z)().get,i=(0,l.Z)(a.getUserInfo),o=(0,l.Z)(a.getUserProfile);return[n,{"getUserInfo":function getUserInfo(e){return r().then((function(n){return n.authSetting["scope.userInfo"]?i(e).then((function(e){return t(e),e})):(0,v.Hv)("getUserInfo","please auth scope.userInfo first")}))},"getUserProfile":function getUserProfile(e){return o(e).then((function(e){return t(e),e}))}}]},p=t(5043),h=t(2053),g=(0,h.defineComponent)({"__name":"index","setup":function setup(e){var n=d(),t=(0,p.Z)(n,2),a=t[0],s=void 0===a?{}:a,l=t[1],f=l.getUserInfo,v=l.getUserProfile,g=(0,c.Z)().login,m=(0,u.Z)({"mask":!0,"title":"获取结果","showCancel":!1}),w=function(){var e=(0,o.Z)((0,i.Z)().mark((function _callee(){var e;return(0,i.Z)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e="获取成功",n.prev=1,n.next=4,g(!0);case 4:return n.next=6,f({"lang":"zh_CN","withCredentials":!0});case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),e=n.t0.errMsg||n.t0.message;case 11:m({"content":e});case 12:case"end":return n.stop()}}),_callee,null,[[1,8]])})));return function handleGetUserInfo(){return e.apply(this,arguments)}}();return function(e,n){var t=(0,h.resolveComponent)("nut-avatar"),i=(0,h.resolveComponent)("nut-col"),o=(0,h.resolveComponent)("nut-row"),u=(0,h.resolveComponent)("nut-button"),c=(0,h.resolveComponent)("nut-cell"),a=(0,h.resolveComponent)("nut-cell-group"),l=(0,h.resolveComponent)("demo-content");return(0,h.openBlock)(),(0,h.createBlock)(l,null,{"default":(0,h.withCtx)((function(){return[(0,h.createVNode)(o,{"type":"flex","gutter":"8","align":"center","justify":"center"},{"default":(0,h.withCtx)((function(){return[(0,h.createVNode)(i,{"span":"4"},{"default":(0,h.withCtx)((function(){var e,n;return[(0,h.createVNode)(t,{"size":"large","icon":null===(e=(0,h.unref)(s))||void 0===e||null===(n=e.userInfo)||void 0===n?void 0:n.avatarUrl},null,8,["icon"])]})),"_":1}),(0,h.createVNode)(i,{"span":"20"},{"default":(0,h.withCtx)((function(){return[(0,h.createVNode)(o,{"type":"flex","flex-wrap":"wrap","align":"center","justify":"center"},{"default":(0,h.withCtx)((function(){return[(0,h.createVNode)(i,null,{"default":(0,h.withCtx)((function(){var e,n;return[(0,h.createTextVNode)("昵称: "+(0,h.toDisplayString)(null===(e=(0,h.unref)(s))||void 0===e||null===(n=e.userInfo)||void 0===n?void 0:n.nickName),1)]})),"_":1}),(0,h.createVNode)(i,null,{"default":(0,h.withCtx)((function(){var e,n;return[(0,h.createTextVNode)("性别: "+(0,h.toDisplayString)(null===(e=(0,h.unref)(s))||void 0===e||null===(n=e.userInfo)||void 0===n?void 0:n.gender),1)]})),"_":1})]})),"_":1})]})),"_":1})]})),"_":1}),(0,h.createVNode)(u,{"class":"gap","shape":"square","type":"primary","block":"","onClick":n[0]||(n[0]=function(e){return w()})},{"default":(0,h.withCtx)((function(){return[(0,h.createTextVNode)("获取用户信息")]})),"_":1}),(0,h.createVNode)(u,{"class":"gap","shape":"square","type":"primary","block":"","onTap":n[1]||(n[1]=function(e){return(0,h.unref)(v)({"lang":"zh_CN","desc":"仅作为小程序展示使用"})})},{"default":(0,h.withCtx)((function(){return[(0,h.createTextVNode)("获取用户信息(包含敏感信息)")]})),"_":1}),(0,h.createVNode)(a,{"title":"用户信息"},{"default":(0,h.withCtx)((function(){var n,t;return[((0,h.openBlock)(!0),(0,h.createElementBlock)(h.Fragment,null,(0,h.renderList)((0,r.Z)((0,r.Z)({},null!==(n=null===(t=(0,h.unref)(s))||void 0===t?void 0:t.userInfo)&&void 0!==n?n:{}),(0,h.unref)(s)),(function(n,t){return(0,h.openBlock)(),(0,h.createBlock)(c,{"key":t,"title":t,"sub-title":e.$filters.stringify(n)},null,8,["title","sub-title"])})),128))]})),"_":1})]})),"_":1})}}});var m=g}}]);