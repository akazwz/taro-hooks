(self.webpackJsonp=self.webpackJsonp||[]).push([[5857],{"4992":function(e,t,n){"use strict";var r=n(2535),o=n(4012),a=n(6881),u=n(9524);t.Z=function useModal(e){var t=(0,o.sO)(e);(0,o.d4)((function(){t.current=e}),[e]);var n=(0,a.Z)(r.showModal);return function show(e){if(!e&&!t.current)return Promise.reject((0,u.Hv)("showModal","please provide a option"));var r=(0,u.JA)(t.current,e);return n(r)}}},"6881":function(e,t,n){"use strict";var r=n(969),o=n(9524);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}t.Z=function usePromise(e){return function(t){var n;if(!e)return Promise.reject((0,o.Hv)(e,"please input a valid method name"));var a=null!=(n=null==e?void 0:e.name)?n:"usePromise::implementMethod";return new Promise((function(n,u){try{if(!(0,r.mf)(e))throw new TypeError("["+a+"] not vaild for Taro");var i;null==(i=e(_extends({},t||{},{"success":n,"fail":u})))||null==i.catch||i.catch(u)}catch(e){u((0,o.Hv)(a,e.message))}}))}}},"9524":function(e,t,n){"use strict";n.d(t,{"BB":function(){return a},"kM":function(){return u},"Hv":function(){return generateGeneralFail},"JA":function(){return combineOptions},"vL":function(){return stringfiyUrl}});var r=n(969),o=n(9059);var a=!0,u=function typeOf(e,t){return[t].flat().some((function(t){return Object.prototype.toString.call(e)==="[object "+t+"]"}))};function generateGeneralFail(e,t){var n="[API "+e+"] "+(t=t||"调用失败");return a||(0,r.H)(n),{"errMsg":n}}function combineOptions(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.assign({},e,t)}function stringfiyUrl(e,t){var n=e;if(t&&(0,r.hM)(t,"Object")){var a=n.includes("?");n+=(a?"&":"?")+(0,o.stringify)(t)}return n}},"8991":function(e,t,n){"use strict";n.r(t);var r=n(4936),o=n.n(r),a=n(412),u=n.n(a)()(o());u.push([e.id,"\n#demo-map-id {\n  position: relative;\n  left: auto;\n  top: auto;\n  width: 100%;\n  height: 10rem;\n}\n",""]),t.default=u},"1919":function(e,t,n){var r=n(5013),o=n(8991);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);var a={"insert":"head","singleton":!1};r(o,a);e.exports=o.locals||{}},"5857":function(e,t,n){"use strict";n.r(t),n.d(t,{"default":function(){return g}});var r=n(4992),o=n(94),a=n(1503),u=n(2535),i=n.n(u),c=n(4012),l=n(969),s=n(9524);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}var f=function useActivePromise(e,t){var n=function generator(t){return function(n){var r,o=null==(r=(0,l.JR)(t))?void 0:r[e];if(!o)return Promise.reject((0,s.Hv)(e,"please input a valid method name"));var a=null!=e?e:"usePromise::implementMethod";return new Promise((function(e,t){try{if(!(0,l.mf)(o))throw new TypeError("["+a+"] not vaild for Taro");var r;null==(r=o(_extends({},n||{},{"success":e,"fail":t})))||null==r.catch||r.catch(t)}catch(e){t((0,s.Hv)(a,e.message))}}))}},r=(0,c.eJ)((function(){return n(t)})),o=r[0],a=r[1],u=(0,c.sO)(n(t));return(0,c.d4)((function(){t&&l.z$&&a((function(){return n(t)}))}),[t]),l.Eq?u.current:o};var d=function useMap(e,t){var n=(0,c.eJ)(),r=n[0],o=n[1],a=(0,c.eJ)({})[1];i().useReady((function(){o(t?(0,u.createMapContext)(e,t):(0,u.createMapContext)(e))})),(0,c.d4)((function(){r&&l.z$&&a({})}),[r]);var s=f("getCenterLocation",r),d=f("getRegion",r),p=f("getRotate",r),v=f("getScale",r),m=f("getSkew",r),h=f("openMapApp",r),g=f("includePoints",r),k=f("moveToLocation",r),w=f("translateMarker",r),y=f("addMarkers",r),x=f("removeMarkers",r);return[r,{"get":function get(e){var t=e?{"iconPath":e}:{};return Promise.all([s(t),d(),p(),v(),m()]).then((function(e){return{"center":e[0],"region":e[1],"rotate":e[2],"scale":e[3],"skew":e[4]}}))},"open":h,"include":function include(e,t){return void 0===t&&(t=[]),g({"points":e,"padding":t})},"moveTo":k,"translate":w,"toggleMarkers":function toggleMarkers(e,t){return void 0===t&&(t=!1),Array.isArray(e)&&e.every(l.hj)?x({"markerIds":e}):y({"markers":e,"clear":t})}}]},p=n(5043),v=n(8530),m=n(2053),h=(0,m.defineComponent)({"__name":"index","setup":function setup(e){var t="demo-map-id",u=[{"latitude":30.653186,"longitude":104.083735},{"latitude":30.655546,"longitude":104.0778}],i=[(0,v.Z)({"id":0,"title":"太古里marker","iconPath":n(3823),"width":50,"height":50},u[1])],s={"autoRotate":!0,"moveWithRotate":!0,"markerId":0,"rotate":0,"destination":u[0]},f=d(t),h=(0,p.Z)(f,2),g=h[0],k=h[1],w=k.get,y=k.include,x=k.moveTo,_=k.translate,b=k.toggleMarkers,C=(0,c.eJ)({}),M=(0,p.Z)(C,2),O=M[0],P=M[1],Z=function(){var e=(0,a.Z)((0,o.Z)().mark((function _callee(){var e;return(0,o.Z)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w();case 3:e=t.sent,P(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),J({"content":"获取中心位置失败"});case 10:case"end":return t.stop()}}),_callee,null,[[0,7]])})));return function handleGetInfo(){return e.apply(this,arguments)}}(),j=function(){var e=(0,a.Z)((0,o.Z)().mark((function _callee2(){return(0,o.Z)().wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y(u);case 3:J({"content":"设置经纬成功"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),J({"content":"设置经纬失败"});case 9:case"end":return e.stop()}}),_callee2,null,[[0,6]])})));return function handleInclude(){return e.apply(this,arguments)}}(),T=function(){var e=(0,a.Z)((0,o.Z)().mark((function _callee3(){return(0,o.Z)().wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(i,!0);case 3:return x(u[0]),e.next=6,_(s);case 6:J({"content":"平移marker成功"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),J({"content":"平移marker失败"});case 12:case"end":return e.stop()}}),_callee3,null,[[0,9]])})));return function handleTranslate(){return e.apply(this,arguments)}}();(0,c.d4)((function(){(0,l.JR)(g)&&(Z(),b(i,!0))}),[g]);var J=(0,r.Z)({"title":"useMap","showCancel":!1,"mask":!0});return function(e,n){var r=(0,m.resolveComponent)("taro-map"),o=(0,m.resolveComponent)("nut-button"),a=(0,m.resolveComponent)("nut-cell"),u=(0,m.resolveComponent)("nut-cell-group"),c=(0,m.resolveComponent)("demo-content");return(0,m.openBlock)(),(0,m.createBlock)(c,null,{"default":(0,m.withCtx)((function(){var c,l,s,f;return[(0,m.createVNode)(r,{"class":"gap","id":t,"show-location":!0,"show-scale":!0,"show-compass":!0,"latitude":null===(c=(0,m.unref)(O))||void 0===c||null===(l=c.center)||void 0===l?void 0:l.latitude,"longitude":null===(s=(0,m.unref)(O))||void 0===s||null===(f=s.center)||void 0===f?void 0:f.longitude,"markers":i},null,8,["latitude","longitude"]),(0,m.createVNode)(o,{"shape":"square","type":"primary","class":"gap","block":"","onClick":n[0]||(n[0]=function(e){return j()})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("展示指定经纬")]})),"_":1}),(0,m.createVNode)(o,{"shape":"square","type":"primary","class":"gap","block":"","onClick":n[1]||(n[1]=function(e){return(0,m.unref)(x)()})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("移至当前定位")]})),"_":1}),(0,m.createVNode)(o,{"shape":"square","type":"primary","class":"gap","block":"","onClick":n[2]||(n[2]=function(e){return T()})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("平移marker")]})),"_":1}),(0,m.createVNode)(o,{"shape":"square","type":"primary","class":"gap","block":"","onClick":n[3]||(n[3]=function(e){return(0,m.unref)(b)([0])})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("移除所有marker")]})),"_":1}),(0,m.createVNode)(u,{"title":"地图信息"},{"default":(0,m.withCtx)((function(){return[((0,m.openBlock)(!0),(0,m.createElementBlock)(m.Fragment,null,(0,m.renderList)((0,m.unref)(O),(function(t,n){return(0,m.openBlock)(),(0,m.createBlock)(a,{"key":n,"title":n,"sub-title":e.$filters.stringify(t)},null,8,["title","sub-title"])})),128))]})),"_":1})]})),"_":1})}}});n(1919);var g=h}}]);