"use strict";(self.webpackJsonp=self.webpackJsonp||[]).push([[1681],{"6881":function(e,t,n){var r=n(969),o=n(9524);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}t.Z=function usePromise(e){return function(t){var n;if(!e)return Promise.reject((0,o.Hv)(e,"please input a valid method name"));var u=null!=(n=null==e?void 0:e.name)?n:"usePromise::implementMethod";return new Promise((function(n,i){try{if(!(0,r.mf)(e))throw new TypeError("["+u+"] not vaild for Taro");var c;null==(c=e(_extends({},t||{},{"success":n,"fail":i})))||null==c.catch||c.catch(i)}catch(e){i((0,o.Hv)(u,e.message))}}))}}},"5006":function(e,t,n){var r=n(2535),o=n(4012),u=n(6881),i=n(9524);t.Z=function useToast(e){var t=(0,o.sO)(e);(0,o.d4)((function(){t.current=e}),[e]);var n=(0,u.Z)(r.showToast);return{"show":function show(e){if(!e&&!t.current)return Promise.reject((0,i.Hv)("showToast","please provide a option"));var r=(0,i.JA)(t.current,e);return n(r)},"hide":(0,u.Z)(r.hideToast)}}},"9524":function(e,t,n){n.d(t,{"BB":function(){return u},"kM":function(){return i},"Hv":function(){return generateGeneralFail},"JA":function(){return combineOptions},"vL":function(){return stringfiyUrl}});var r=n(969),o=n(9059);var u=!0,i=function typeOf(e,t){return[t].flat().some((function(t){return Object.prototype.toString.call(e)==="[object "+t+"]"}))};function generateGeneralFail(e,t){var n="[API "+e+"] "+(t=t||"调用失败");return u||(0,r.H)(n),{"errMsg":n}}function combineOptions(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.assign({},e,t)}function stringfiyUrl(e,t){var n=e;if(t&&(0,r.hM)(t,"Object")){var u=n.includes("?");n+=(u?"&":"?")+(0,o.stringify)(t)}return n}},"1681":function(e,t,n){n.r(t),n.d(t,{"default":function(){return b}});var r=n(94),o=n(1503),u=n(5006),i=n(2535),c=n(4012),a=n(6881),s=n(9524);var l=function useRecord(){var e=(0,c.sO)((0,i.getRecorderManager)()),t=(0,a.Z)(e.current.start);return[e.current,{"start":t,"stop":function stop(){return new Promise((function(t,n){try{e.current.onStop((function callback(e){t(e)})),e.current.stop()}catch(e){n((0,s.Hv)("stopRecord",e.errMsg||e.message))}}))}}]},f=["context","success","fail","complete","mixWithOther","obeyMuteSwitch"];var p=function _async(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}((function(e){var t=e.context,n=e.success,r=e.fail,o=e.complete,u=e.mixWithOther,c=void 0===u||u,a=e.obeyMuteSwitch,l=void 0===a||a,p=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,f);return function _catch(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return function _await(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}((0,i.setInnerAudioOption)({"mixWithOther":c,"obeyMuteSwitch":l}),(function(){if(t)for(var e in p)t[e]=p[e];var r={"errMsg":"setInnerAudioOption: success"};return null==n||n(r),null==o||o(r),r}))}),(function(e){var t=(0,s.Hv)("setInnerAudioOption",e.errMsg||e.message);throw null==r||r(t),null==o||o(t),new Error(t.errMsg)}))}));function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_extends.apply(this,arguments)}var d={"autoplay":!1,"loop":!1,"obeyMuteSwitch":!0,"playbackRate":1,"volume":1,"startTime":0};var v=function useAudio(e){void 0===e&&(e=d);var t=(0,c.sO)((0,i.createInnerAudioContext)()),n=(0,c.sO)(),r=(0,a.Z)(p),o=(0,a.Z)(i.getAvailableAudioSources);return(0,c.d4)((function(){r(_extends({},e,{"context":t.current})),function getSources(){o().then((function(e){return n.current=e.audioSources,e}))}()}),[e]),[t.current,{"sources":n.current,"setOption":r,"play":function play(e){t.current&&(e&&r({"src":e}),t.current.play())}}]},h=n(5043),m=n(2053),y=(0,m.defineComponent)({"__name":"index","setup":function setup(e){var t=(0,c.eJ)(),n=(0,h.Z)(t,2),i=n[0],a=n[1],s=v(),f=(0,h.Z)(s,2),p=f[0],d=f[1].play,y=l(),b=(0,h.Z)(y,2)[1],g=b.start,x=b.stop,w=(0,u.Z)({"title":"useVoice","duration":500,"mask":!0}).show,O=function(){var e=(0,o.Z)((0,r.Z)().mark((function _callee(){var e;return(0,r.Z)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,w({"title":"正在停止","duration":2e7}),t.next=4,x();case 4:e=t.sent,a(e),w({"title":"停止录制成功"}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),w({"title":"停止录制失败","icon":"error"});case 12:case"end":return t.stop()}}),_callee,null,[[0,9]])})));return function handleStop(){return e.apply(this,arguments)}}();return function(e,t){var n=(0,m.resolveComponent)("nut-button"),r=(0,m.resolveComponent)("demo-content");return(0,m.openBlock)(),(0,m.createBlock)(r,null,{"default":(0,m.withCtx)((function(){var e,r;return[(0,m.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","onClick":t[0]||(t[0]=function(e){return(0,m.unref)(g)()})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("开始录制")]})),"_":1}),(0,m.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","onClick":t[1]||(t[1]=function(e){return O()})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("结束录制")]})),"_":1}),(0,m.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","disabled":!(null!==(e=(0,m.unref)(i))&&void 0!==e&&e.tempFilePath),"onClick":t[2]||(t[2]=function(e){var t;return(0,m.unref)(d)(null===(t=(0,m.unref)(i))||void 0===t?void 0:t.tempFilePath)})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("播放音频")]})),"_":1},8,["disabled"]),(0,m.createVNode)(n,{"shape":"square","type":"primary","class":"gap","block":"","disabled":!(null!==(r=(0,m.unref)(i))&&void 0!==r&&r.tempFilePath),"onClick":t[3]||(t[3]=function(e){var t,n;return null===(t=(0,m.unref)(p))||void 0===t||null===(n=t.stop)||void 0===n?void 0:n.call(t)})},{"default":(0,m.withCtx)((function(){return[(0,m.createTextVNode)("停止播放音频")]})),"_":1},8,["disabled"])]})),"_":1})}}});var b=y}}]);